# PortyChat - macOS串口通信工具

## 项目概述
PortyChat 是一个简洁易用的 macOS 串口通信工具，主要用于串口数据的收发和管理。该工具支持多种波特率设置，支持文本和十六进制两种数据格式，并提供历史记录功能。

## 功能特性

### 1. 串口管理
- [x] 自动检测系统可用串口
- [x] 动态刷新串口列表
- [x] 支持常用波特率选择（如9600、115200等）
- [x] 串口连接状态显示
- [x] 连接状态实时反馈

### 2. 数据收发
- [x] 支持文本模式和十六进制模式
- [x] 实时数据接收显示
- [x] 数据发送功能
- [x] 一键清除收发数据
- [x] 自动滚动功能
- [x] HEX模式下支持自动换行
- [x] HEX模式下同时显示原始数据和解析数据
- [x] 平滑的界面切换动画

### 3. 历史记录
- [ ] 保存发送的历史消息
- [ ] 支持快速重发历史消息
- [ ] 历史记录管理（删除、清空等）

## 技术架构

### 开发环境
- macOS 13.0+
- Swift 5.0
- SwiftUI
- Xcode 14.0+

### 核心模块
1. **串口通信模块**
   - 使用ORSSerial框架处理串口通信
   - 步数据收发
   - 支持多种数据格式转换
   - 支持数据统计和监控
   - 支持超时和异常处理
   - 添加串口通信协议抽象层
   - 实现串口通信重试机制
   - 添加数据校验机制
   - 实现数据包分片处理
   - 支持自定义通信协议
   
2. **界面模块**
   - 使用SwiftUI构建现代化界面
   - 采用MVVM架构模式
   - 流畅的动画效果
   - 响应式布局
   - 支持键盘快捷操作
   - 状态实时反馈
   - 实现深色模式支持
   - 添加快捷键系统
   - 支持界面布局自定义
   - 实现多窗口支持
   - 添加拖拽功能支持
   
3. **数据处理模块**
   - 支持文本/HEX格式转换
   - 支持数据过滤和格式化
   - 支持自动换行功能
   - 支持数据验证
   - 支持缓冲区管理
   - 支持大数据处理
   - 实现数据压缩功能
   - 添加数据加密支持
   - 实现数据包重组功能
   - 支持自定义数据过滤器
   - 添加数据统计分析功能

## 界面设计
应用采用三标签式布局：

1. **首页（串口通信）**
   - [x] 串口设置区域（固定布局）
   - [x] 数据接收区域（动态布局）
   - [x] 数据发送区域（固定高度）
   - [x] 快捷操作按钮
   - [x] HEX模式下的双窗口显示

2. **历史记录**
   - [ ] 历史消息列表
   - [ ] 消息管理功能

3. **设置**
   - [ ] 预留功能配置界面

## 开发计划

### 第一阶段：基础功能实现 ✓
- [x] 创建项目基础架构
- [x] 实现串口检测和选择
- [x] 实现基本的数据收发功能
- [x] 完成主界面UI设计
- [x] 实现HEX模式切换
- [x] 优化界面动画效果

### 第二阶段：功能完善
- [ ] 数据发送功能增强
  - [ ] 定时发送功能
  - [ ] 循环发送功能
  - [ ] 发送数据计数统计
  - [ ] 发送失败重试机制
  - [ ] 大数据分包发送
- [ ] 数据接收功能优化
  - [ ] 接收数据过滤功能
  - [ ] 数据接收缓冲区配置
  - [ ] 接收数据搜索功能
  - [ ] 接收数据高亮显示
  - [ ] 自定义数据解析格式
- [ ] 串口配置增强
  - [ ] 数据位选择（5/6/7/8）
  - [ ] 校验位选择（None/Odd/Even/Mark/Space）
  - [ ] 流控制选择（None/Hardware/Software）
  - [ ] DTR/RTS 控制
  - [ ] 串口超时设置
- [ ] 历史记录功能
  - [ ] 发送历史记录
  - [ ] 接收历史记录
  - [ ] 历史记录搜索
  - [ ] 历史记录导出
  - [ ] 快速重发功能

### 第三阶段：优化和测试
- [ ] 数据分析功能
  - [ ] 数据包计数统计
  - [ ] 数据速率统计
  - [ ] 错误率统计
  - [ ] 数据波形显示
  - [ ] 自定义数据解析
- [ ] 用户界面优化
  - [ ] 分屏显示功能
  - [ ] 数据显示区域大小可调
  - [ ] 多主题支持
  - [ ] 快捷键支持
  - [ ] 状态栏显示更多信息
- [ ] 数据导出功能
  - [ ] 支持多种格式（TXT/CSV/JSON）
  - [ ] 支持选择性导出
  - [ ] 支持数据过滤导出
  - [ ] 支持自定义导出格式
- [ ] 调试辅助功能
  - [ ] 数据包解析显示
  - [ ] 通信时序图
  - [ ] 错误日志记录
  - [ ] 性能监控
  - [ ] 内存使用监控

## 开发优先级

### 第一优先级（基础功能完善）
- 历史记录功能实现
- 数据发送增强（定时发送、循环发送）
- 数据接收优化（过滤、搜索）
- 基础数据统计

### 第二优先级（用户体验提升）
- 界面优化（分屏、大小可调）
- 数据导出功能
- 快捷键支持
- 多主题支持

### 第三优先级（高级功能）
- 数据分析功能
- 调试辅助功能
- 性能监控
- 插件系统

## 使用说明
1. 串口连接
   - 从下拉列表选择串口设备
   - 选择合适的波特率
   - 点击"连接"按钮
   
2. 数据收发
   - 在发送区域输入要发送的数据
   - 可选择HEX模式发送
   - 接收区域实时显示收到的数据
   - HEX模式下可查看原始数据

3. 界面控制
   - 自动滚动：控制是否自动滚动最新数据
   - 自动换行：HEX模式下控制数据显示格式
   - 清除按钮：一键清空显示区域

## 注意事项
1. 使用前请确保系统已正确识别串口设备
2. 建议在发送大量数据时先进行小数据测试
3. 使用十六进制模式时注意数据格式正确性

## 贡献指南
欢迎提交问题和建议，帮助改进项目。

## 许可证
MIT License

## 安装说明
1. 克隆仓库
   ```bash
   git clone https://github.com/Tchaikovsky66/PortyChat.git
   ```
2. 使用 Xcode 打开项目
3. 安装依赖
   ```bash
   cd PortyChat
   swift package resolve
   ```

## 快速开始
1. 打开应用
2. 选择串口设备和波特率
3. 点击连接按钮
4. 开始收发数据

## 开发环境配置
1. **系统要求**
   - macOS 13.0 或更高版本
   - Xcode 14.0 或更高版本

2. **依赖项**
   - ORSSerial Framework
   - SwiftUI

## 开发规范

### 代码规范
- 遵循 Swift 官方代码规范
- 使用 SwiftLint 进行代码检查
- 必要的代码注释和文档

### Git 工作流
- 使用 Git Flow 开发流程
- 提交信息规范
- 版本发布流程

### 测试规范
- 单元测试覆盖率要求
- UI 测试规范
- 性能测试标准

## 版本历史

### v1.0.0 (2024-01)
- 基础串口通信功能
- 文本/HEX模式支持
- 基础UI界面实现

### v1.1.0 (计划中)
- 历史记录功能
- 数据统计显示
- 性能优化

## 安全说明

### 数据安全
- 数据传输加密
- 本地数据存储加密
- 敏感信息保护

### 权限管理
- 串口访问权限
- 文件系统权限
- 系统API权限

## 性能指标

### 响应时间
- UI响应时间 < 16ms
- 数据处理延迟 < 100ms
- 串口通信延迟 < 50ms

### 资源占用
- CPU使用率 < 30%
- 内存占用 < 200MB
- 存储空间 < 100MB
